<div class="w-100" *ngIf="isEmptySkillArr">
  <img class="notFoundImg" src="https://lh3.googleusercontent.com/proxy/HcQ9meKx4GSioTrTGtYfbASBJLdsXI9jNBUCy5fWHS8DZ_YDxTUUQo2yeiZI7HtxK5MvVMw3G5LiXZg-1pnSIyOqEdDdiAM"/>
  <h3 style="text-align: center;">Sorry but we don't found yours skills</h3>
</div>
<div *ngIf="!isEmptySkillArr" style="overflow-x: scroll;">
    <table class="table table-bordered" style="display: block; overflow-x: scroll; white-space: nowrap;">
      <thead>
        <tr id="TableDateBox">
          <th style="min-width: 100px; min-height: 100px;" scope="col">
            <select class="form-control custom-select" id="yearSelect" name="yearSel"
              (change)="selectYear($event.target.value)">
                <option *ngFor="let year of allYears let in=index" [value]="year">{{year}}</option>
              </select>
            <!--<select id="endYear" class="form-control custom-select" name="yearSelect" [(ngModel)]="currentYear">
              <option *ngFor="let year of allYears let in=index" value="year">{{year}}</option>
            </select>-->
            <!--<button class="btn btn-primary" (click)="openCustomDialog()">Press</button>-->
            <!--<div ngbDropdown class="d-inline-block">
              <button class="btn btn-outline-primary" id="dropdownBasic1" ngbDropdownToggle>Options</button>
              <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                <button ngbDropdownItem (click)="addUserSkillWithUnit()">Add new skill with unit</button>
                <button ngbDropdownItem (click)="openCustomDialog()">Add comment</button>
              </div>
            </div>-->
            <div><span style="float: right; cursor: pointer;"><i class="fas fa-info-circle" title="Red = Level 1; Yellow = Level 2; Green = Level 3; Cyan = Level 4; Blue = Level 5"></i></span></div>
          </th>
          <th name="TableDateItemTh" class="skillTime" scope="col">1.1.{{currentYear}}<br>-<br>1.2.{{currentYear}}</th>
          <th name="TableDateItemTh" class="skillTime" scope="col">1.2.{{currentYear}}<br>-<br>1.3.{{currentYear}}</th>
          <th name="TableDateItemTh" class="skillTime" scope="col">1.3.{{currentYear}}<br>-<br>1.4.{{currentYear}}</th>
          <th name="TableDateItemTh" class="skillTime" scope="col">1.4.{{currentYear}}<br>-<br>1.5.{{currentYear}}</th>
          <th name="TableDateItemTh" class="skillTime" scope="col">1.5.{{currentYear}}<br>-<br>1.6.{{currentYear}}</th>
          <th name="TableDateItemTh" class="skillTime" scope="col">1.6.{{currentYear}}<br>-<br>1.7.{{currentYear}}</th>
          <th name="TableDateItemTh" class="skillTime" scope="col">1.7.{{currentYear}}<br>-<br>1.8.{{currentYear}}</th>
          <th name="TableDateItemTh" class="skillTime" scope="col">1.8.{{currentYear}}<br>-<br>1.9.{{currentYear}}</th>
          <th name="TableDateItemTh" class="skillTime" scope="col">1.9.{{currentYear}}<br>-<br>1.10.{{currentYear}}</th>
          <th name="TableDateItemTh" class="skillTime" scope="col">1.10.{{currentYear}}<br>-<br>1.11.{{currentYear}}</th>
          <th name="TableDateItemTh" class="skillTime" scope="col">1.11.{{currentYear}}<br>-<br>1.12.{{currentYear}}</th>
          <th name="TableDateItemTh" class="skillTime" scope="col">1.12.{{currentYear}}<br>-<br>1.1.{{currentYear}}</th>
        </tr>
      </thead>
      <tbody name="tableBody">
        <ng-container *ngFor="let categ of categories let in=index">
          <tr id="TableDateBox">
            <th scope="row">{{categ}}</th>
            <td name="TableDateItem" colspan="12" style="padding: 0;">
              <svg class="svgPos" name="SkillSVG" width="3600" height="200">
                <!--<defs>
                  <linearGradient id="solids" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" style="stop-color:rgb(0,0,255);stop-opacity:1;stroke-width:3;stroke:rgb(0,0,0)" />
                    <stop offset="90%" style="stop-color:rgb(0,0,255);stop-opacity:1;stroke-width:3;stroke:rgb(0,0,0)" />
                    <stop offset="90%" style="stop-color:rgb(255,0,0);stop-opacity:1;stroke-width:3;stroke:rgb(0,0,0)" />
                    <stop offset="100%" style="stop-color:rgb(255,0,0);stop-opacity:1;stroke-width:3;stroke:rgb(0,0,0)" />
                  </linearGradient>
                </defs>-->
                <text name="SkillText" x="0" y="15" fill="red">I love SVG!</text>
                <rect name="SkillRect" x="0" y="25" width="400" height="10" (click)="openCustomDialog(content)" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)"/>
                <text name="SkillText" x="0" y="55" fill="red">I love SVG!</text>
                <rect name="SkillRect" x="0" y="65" width="400" height="10" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)"/>
              </svg>
            </td>
          </tr>
          <tr name="delim">
              <th colspan="13"></th>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>

  <ng-template #myModal let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Comment</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form>
        <div class="form-group">
          <label for="skillComment">Comment</label>
          <div class="input-group">
            <div class="w-100">
              <textarea class="form-control" style="height: 150px;" placeholder="Enter comment" id="skillComment" name="achievnotes" [(ngModel)]="addedComment"></textarea>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Save</button>
    </div>
  </ng-template>

  <ng-template #parentModal let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Add New Skill Unit</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form *ngIf="step1">
        <div class="form-group">
          <label for="categorySelect">Skill Category</label>
          <div class="input-group">
            <div class="w-100">
              <select class="form-control custom-select" id="categorySelect" name="company"
              (change)="selectCateg($event.target.value)">
                <option *ngFor="let categ of categories let in=index" [value]="categ">{{categ}}</option>
              </select>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="skillName">Skill Name</label>
          <input type="text" class="form-control" id="skillName" placeholder="Enter here skill name" name="usName" [(ngModel)]="addedUserSkill.skillname">
        </div>
        <div class="form-row">
          <div class="form-group col">
            <label for="startDate">Start Date</label>
            <input type="date" class="form-control" id="startDate" placeholder="Enter start date" name="usStart" [(ngModel)]="addedUserSkill.startDate">
          </div>
          <div class="form-group col">
            <label for="endDate">End Date</label>
            <input type="date" class="form-control" id="endDate" placeholder="Enter end date" name="usEnd" [(ngModel)]="addedUserSkill.endDate">
          </div>
        </div>
      </form>

      <form *ngIf="step2">
        <div class="form-row">
          <div class="form-group col">
            <label for="addedMetric1">Metric name</label>
            <input type="text" class="form-control" name="smName1" placeholder="Enter metric name" [(ngModel)]="addedSkillMetrics[0].metricName">
          </div>
          <div class="form-group col">
            <label for="addedMetric2">Metric value</label>
            <input type="number" min="0" max="5" step="1" class="form-control" name="smValue1" placeholder="Enter metric value" [(ngModel)]="addedSkillMetrics[0].metricValue">
          </div>
          <div class="form-group col">
            <label for="addedMetric3">Metric influence</label>
            <input type="number" min="0.1" max="0.8" step="0.1" class="form-control" name="smInfluence1" placeholder="Enter metric influence" [(ngModel)]="addedSkillMetrics[0].metricInfluence">
          </div>
        </div>
        <div *ngIf="metric2" class="form-row">
          <div class="form-group col">
            <label for="addedMetric1">Metric name</label>
            <input type="text" class="form-control" name="smName2" placeholder="Enter metric name" [(ngModel)]="addedSkillMetrics[1].metricName">
          </div>
          <div class="form-group col">
            <label for="addedMetric2">Metric value</label>
            <input type="number" min="0" max="5" step="1" class="form-control" name="smValue2" placeholder="Enter metric value" [(ngModel)]="addedSkillMetrics[1].metricValue">
          </div>
          <div class="form-group col">
            <label for="addedMetric3">Metric influence</label>
            <input type="number" min="0.1" max="0.8" step="0.1" class="form-control" name="smInfluence2" placeholder="Enter metric influence" [(ngModel)]="addedSkillMetrics[1].metricInfluence">
          </div>
        </div>
        <div *ngIf="metric3" class="form-row">
          <div class="form-group col">
            <label for="addedMetric1">Metric name</label>
            <input type="text" class="form-control" name="smName3" placeholder="Enter metric name" [(ngModel)]="addedSkillMetrics[2].metricName">
          </div>
          <div class="form-group col">
            <label for="addedMetric2">Metric value</label>
            <input type="number" min="0" max="5" step="1" class="form-control" name="smValue3" placeholder="Enter metric value" [(ngModel)]="addedSkillMetrics[2].metricValue">
          </div>
          <div class="form-group col">
            <label for="addedMetric3">Metric influence</label>
            <input type="number" min="0.1" max="0.8" step="0.1" class="form-control" name="smInfluence3" placeholder="Enter metric influence" [(ngModel)]="addedSkillMetrics[2].metricInfluence">
          </div>
        </div>
        <div class="form-group">
          <button class="btn btn-primary" (click)="addMetric()" *ngIf="!metric3">Add metric (max 3)</button>
        </div>
      </form>

      <form *ngIf="step3">
        
        <div class="form-row">
          <div class="form-group col">
            <label for="addedUnit1">Unit name</label>
            <input type="text" class="form-control" name="addedUnit1" placeholder="Enter unit name" name="suName1" [(ngModel)]="addedSkillUnits[0].unitname">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col">
            <label for="addedUnitStart1">Start Date</label>
            <input type="date" class="form-control" name="addedUnitStart1" placeholder="Enter start date" name="suStart1" [(ngModel)]="addedSkillUnits[0].startDate">
          </div>
          <div class="form-group col">
            <label for="addedUnitEnd1">End Date</label>
            <input type="date" class="form-control" name="addedUnitEnd1" placeholder="Enter end date" name="suEnd1" [(ngModel)]="addedSkillUnits[0].endDate">
          </div>
        </div>

        <div *ngIf="unit2" class="form-row">
          <div class="form-group col">
            <label for="addedUnit2">Unit name</label>
            <input type="text" class="form-control" name="addedUnit2" placeholder="Enter unit name" name="suName2" [(ngModel)]="addedSkillUnits[1].unitname">
          </div>
        </div>
        <div *ngIf="unit2" class="form-row">
          <div class="form-group col">
            <label for="addedUnitStart2">Start Date</label>
            <input type="date" class="form-control" name="addedUnitStart2" placeholder="Enter start date" name="suStart2" [(ngModel)]="addedSkillUnits[1].startDate">
          </div>
          <div class="form-group col">
            <label for="addedUnitEnd2">End Date</label>
            <input type="date" class="form-control" name="addedUnitEnd2" placeholder="Enter end date" name="suEnd2" [(ngModel)]="addedSkillUnits[1].endDate">
          </div>
        </div>

        <div *ngIf="unit3" class="form-row">
          <div class="form-group col">
            <label for="addedUnit3">Unit name</label>
            <input type="text" class="form-control" name="addedUnit3" placeholder="Enter unit name" name="suName3" [(ngModel)]="addedSkillUnits[2].unitname">
          </div>
        </div>
        <div *ngIf="unit3" class="form-row">
          <div class="form-group col">
            <label for="addedUnitStart3">Start Date</label>
            <input type="date" class="form-control" name="addedUnitStart3" placeholder="Enter start date" name="suStart3" [(ngModel)]="addedSkillUnits[2].startDate">
          </div>
          <div class="form-group col">
            <label for="addedUnitEnd3">End Date</label>
            <input type="date" class="form-control" name="addedUnitEnd3" placeholder="Enter end date" name="suEnd3" [(ngModel)]="addedSkillUnits[2].endDate">
          </div>
        </div>
        <div class="form-group">
          <button class="btn btn-primary" (click)="addSkillUnit()" *ngIf="!unit3">Add unit (max 3)</button>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button *ngIf="!step3" type="button" class="btn btn-outline-dark" (click)="addNewUserSkill()">Next</button>
      <button *ngIf="step3" type="button" class="btn btn-outline-dark" (click)="saveAllObjects()">Save</button>
    </div>
  </ng-template>

  <ng-template #childModal let-modal class="w-50">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Add New User Skill Step {{currentStep}}</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form *ngIf="step1">
        <div class="form-group">
          <label for="categorySelect">Skill Category</label>
          <div class="input-group">
            <div class="w-100">
              <select class="form-control custom-select" id="categorySelect" name="usCat" [(ngModel)]="addedUserSkill.categoryName">
                <option *ngFor="let categ of categories let in=index" [value]="categ">{{categ}}</option>
              </select>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="skillName">Skill Name</label>
          <input type="text" class="form-control" id="skillName" placeholder="Enter here skill name" name="usUnit" [(ngModel)]="addedUserSkill.skillname">
        </div>
        <div class="form-row">
          <div class="form-group col">
            <label for="startDate">Start Date</label>
            <input type="date" class="form-control" id="startDate" placeholder="Enter start date" name="unitStart" [(ngModel)]="addedUserSkill.startDate">
          </div>
          <div class="form-group col">
            <label for="endDate">End Date</label>
            <input type="date" class="form-control" id="endDate" placeholder="Enter end date" name="unitEnd" [(ngModel)]="addedUserSkill.endDate">
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="addedNewUserSkill()">Save</button>
    </div>
  </ng-template>
